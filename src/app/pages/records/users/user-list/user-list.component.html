<app-structure>
  <h1 style="display: flex;justify-content: space-between;">
    <span>Usuários</span>
    <span>
      <!-- <button pButton pRipple type="button" icon="fal fa-redo" class="p-button-rounded p-button-text" pTooltip="Atualizar" tooltipPosition="left"></button> -->
      <!--
      <button pButton pRipple type="button" icon="fal fa-redo" class="p-button-rounded" pTooltip="Atualizar"
              tooltipPosition="left"></button>
      -->
      <!-- <button pButton pRipple type="button" icon="fal fa-redo" class="p-button-rounded p-button-outlined" pTooltip="Atualizar" tooltipPosition="left"></button> -->
    </span>
  </h1>

  <!--
  <p-dropdown [options]="events" [(ngModel)]="selectedEvent" placeholder="Selecione um evento"
              optionLabel="name" styleClass="events" [filter]="true" (onChange)="onChangeEvent($event)"></p-dropdown>

  <div class="field-checkbox">
    <p-checkbox [(ngModel)]="activeOnly" [binary]="true" inputId="active-only"
                (onChange)="onChangeActiveOnly($event)"></p-checkbox>
    <label for="active-only" style="cursor:pointer;">Exibir somente os dias e horários ativos</label>
  </div>

  <ng-container *ngIf="isDatesLoading">
    <div class="dates-loader">
      <p-skeleton width="6rem" height="2rem"></p-skeleton>
      <p-skeleton width="6rem" height="2rem"></p-skeleton>
      <p-skeleton width="6rem" height="2rem"></p-skeleton>
    </div>
  </ng-container>

  <ng-container *ngIf="(dates) && (dates.length > 0)">
    <p-tabView [scrollable]="true" (onChange)="onChangeDate($event)">
      <p-tabPanel [header]="item.header" *ngFor="let item of dates; let i = index" [selected]="i == 0">
      </p-tabPanel>
    </p-tabView>

    <ng-container *ngIf="isTimesLoading">
      <p-skeleton styleClass="mb-2"></p-skeleton>
      <p-skeleton styleClass="mb-2"></p-skeleton>
      <p-skeleton styleClass="mb-2"></p-skeleton>
      <p-skeleton styleClass="mb-2"></p-skeleton>
      <p-skeleton styleClass="mb-2"></p-skeleton>
    </ng-container>

    <ng-container *ngIf="(!isTimesLoading) && (times) && (times.length === 0)">
      <p-messages severity="info">
        <ng-template pTemplate="">
          <i class="fal fa-calendar-times"></i>
          <div class="ml-2">Sem horário ativo disponível.</div>
        </ng-template>
      </p-messages>
    </ng-container>

    <ng-container *ngIf="(!isTimesLoading) && (times) && (times.length > 0)">
      <p-accordion (onOpen)="onTabTimeOpen($event)">
        <p-accordionTab *ngFor="let time of times" [(selected)]="time.opened">

          <ng-template pTemplate="header">

            <div class="time-header" [class.disabled]="time.disabled" [pTooltip]="time.tooltip" tooltipPosition="top">
              <span>{{time.name}}</span>

              <ng-container *ngIf="(time.modalityIcons) && (time.modalityIcons.length > 0)">
                <span>
                  <ng-container *ngFor="let icon of time.modalityIcons">
                    <i class="fal mr-2" [class.fa-gamepad-alt]="icon.videoGame" [class.fa-keyboard]="icon.computer"
                       [class.icon-occupied]="icon.occupied" [class.icon-available]="icon.available"></i>
                  </ng-container>
                </span>
              </ng-container>
            </div>

          </ng-template>

          <ng-template pTemplate="content">

            <div class="time-header">
              <div class="flex align-items-center chips"
                   *ngIf="(time.modalityChips) && (time.modalityChips.length > 0)">
                <ng-container *ngFor="let chip of time.modalityChips">
                  <p-chip [label]="chip.label" [icon]="chip.icon" [styleClass]="chip.styleClass"></p-chip>
                </ng-container>
              </div>
              <div>
                <button pButton pRipple type="button" icon="fal fa-redo" class="p-button-rounded"
                        pTooltip="Atualizar lista de presença" tooltipPosition="left" (click)="updateList()"></button>
              </div>
            </div>

            <ng-container *ngIf="isSeatLoading">
              <p-skeleton styleClass="mb-2"></p-skeleton>
              <p-skeleton styleClass="mb-2"></p-skeleton>
              <p-skeleton styleClass="mb-2"></p-skeleton>
              <p-skeleton styleClass="mb-2"></p-skeleton>
              <p-skeleton styleClass="mb-2"></p-skeleton>
            </ng-container>

            <ng-container *ngIf="(!isSeatLoading) && (seats) && (seats.length > 0)">
              <p-table [value]="seats" styleClass="p-datatable-striped" responsiveLayout="scroll">
                <ng-template pTemplate="header">
                  <tr>
                    <th>Jogador</th>
                    <th>Modalidade</th>
                    <th>Ação</th>
                  </tr>
                </ng-template>
                <ng-template pTemplate="body" let-seat>
                  <tr [class.row-presented]="seat.status === 'presented'" [class.row-missed]="seat.status === 'missed'">
                    <td>{{seat.user}}</td>
                    <td>{{seat.modality}}</td>
                    <td
                      *ngIf="(seat.status === 'new') || (seat.status === 'changed') || (seat.status === 'confirmed')">
                      <p-button icon="fal fa-check" styleClass="mr-2" pTooltip="Confirmar presença"
                                tooltipPosition="left" (click)="defineStatusAsPresented(seat)"></p-button>
                      <p-button icon="fal fa-times" styleClass="mr-2 p-button-danger"
                                pTooltip="Não apareceu ou cancelar"
                                tooltipPosition="left" (click)="defineStatusAsMissed(seat)"></p-button>
                    </td>
                    <td *ngIf="seat.status === 'presented'">
                      <i class="fal fa-check"></i>
                    </td>
                    <td *ngIf="seat.status === 'missed'">
                      <i class="fal fa-times"></i>
                    </td>
                  </tr>
                </ng-template>
              </p-table>
            </ng-container>

          </ng-template>

        </p-accordionTab>
      </p-accordion>
    </ng-container>
  </ng-container>
  -->

</app-structure>
